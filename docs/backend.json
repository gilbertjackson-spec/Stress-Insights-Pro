{
  "entities": {
    "Company": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Company",
      "type": "object",
      "description": "Represents a client company using the stress survey system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the company.",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "description": "The name of the company."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "Unit": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Unit",
      "type": "object",
      "description": "Represents a unit within a company.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the unit.",
          "format": "uuid"
        },
        "companyId": {
          "type": "string",
          "description": "Reference to Company. (Relationship: Company 1:N Unit)"
        },
        "name": {
          "type": "string",
          "description": "The name of the unit."
        }
      },
      "required": [
        "id",
        "companyId",
        "name"
      ]
    },
    "Sector": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Sector",
      "type": "object",
      "description": "Represents a sector within a unit.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the sector.",
          "format": "uuid"
        },
        "unitId": {
          "type": "string",
          "description": "Reference to Unit. (Relationship: Unit 1:N Sector)"
        },
        "name": {
          "type": "string",
          "description": "The name of the sector."
        }
      },
      "required": [
        "id",
        "unitId",
        "name"
      ]
    },
    "Position": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Position",
      "type": "object",
      "description": "Represents a job position within a company.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the position.",
          "format": "uuid"
        },
        "companyId": {
          "type": "string",
          "description": "Reference to Company. (Relationship: Company 1:N Position)"
        },
        "name": {
          "type": "string",
          "description": "The name of the position."
        }
      },
      "required": [
        "id",
        "companyId",
        "name"
      ]
    },
    "SurveyTemplate": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SurveyTemplate",
      "type": "object",
      "description": "Represents a template for a stress survey.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the survey template.",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "description": "The name of the survey template (e.g., 'Indicadores de Estresse HSE 2025')."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "Domain": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Domain",
      "type": "object",
      "description": "Represents a domain within a survey template (e.g., 'Demandas', 'Controle').",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the domain.",
          "format": "uuid"
        },
        "templateId": {
          "type": "string",
          "description": "Reference to SurveyTemplate. (Relationship: SurveyTemplate 1:N Domain)"
        },
        "name": {
          "type": "string",
          "description": "The name of the domain."
        },
        "benchmarkPrivateSector": {
          "type": "number",
          "description": "Benchmark score for the private sector."
        },
        "percentile25": {
          "type": "number",
          "description": "25th percentile score."
        },
        "percentile75": {
          "type": "number",
          "description": "75th percentile score."
        },
        "textResultLow": {
          "type": "string",
          "description": "Text displayed when the score is below the 25th percentile."
        },
        "textResultMedium": {
          "type": "string",
          "description": "Text displayed when the score is between the 25th and 75th percentiles."
        },
        "textResultHigh": {
          "type": "string",
          "description": "Text displayed when the score is above the 75th percentile."
        },
        "descriptionText": {
          "type": "string",
          "description": "A brief description of what this domain measures."
        }
      },
      "required": [
        "id",
        "templateId",
        "name"
      ]
    },
    "Question": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Question",
      "type": "object",
      "description": "Represents a question within a domain.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the question.",
          "format": "uuid"
        },
        "domainId": {
          "type": "string",
          "description": "Reference to Domain. (Relationship: Domain 1:N Question)"
        },
        "questionText": {
          "type": "string",
          "description": "The text of the question."
        },
        "questionCode": {
          "type": "string",
          "description": "The code of the question (e.g., 'Q-01')."
        },
        "isInvertedScore": {
          "type": "boolean",
          "description": "Indicates whether the question's scoring is inverted (positive or negative)."
        }
      },
      "required": [
        "id",
        "domainId",
        "questionText",
        "questionCode"
      ]
    },
    "SurveyDeployment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SurveyDeployment",
      "type": "object",
      "description": "Represents a deployment of a survey template to a company.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the survey deployment.",
          "format": "uuid"
        },
        "templateId": {
          "type": "string",
          "description": "Reference to SurveyTemplate. (Relationship: SurveyTemplate 1:N SurveyDeployment)"
        },
        "companyId": {
          "type": "string",
          "description": "Reference to Company. (Relationship: Company 1:N SurveyDeployment)"
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the survey deployment.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The end date of the survey deployment.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The status of the survey deployment (e.g., 'draft', 'active', 'closed')."
        },
        "totalInvited": {
          "type": "number",
          "description": "The total number of employees invited to participate in the survey. Optional for calculating adherence."
        }
      },
      "required": [
        "id",
        "templateId",
        "companyId",
        "startDate",
        "endDate",
        "status"
      ]
    },
    "SurveyRespondent": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SurveyRespondent",
      "type": "object",
      "description": "Represents an anonymous respondent to a survey deployment.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the survey respondent.",
          "format": "uuid"
        },
        "deploymentId": {
          "type": "string",
          "description": "Reference to SurveyDeployment. (Relationship: SurveyDeployment 1:N SurveyRespondent)"
        },
        "token": {
          "type": "string",
          "description": "A unique token for the anonymous access link.",
          "format": "uuid"
        },
        "status": {
          "type": "string",
          "description": "The status of the survey response (e.g., 'pending', 'started', 'completed')."
        },
        "completedAt": {
          "type": "string",
          "description": "The timestamp when the survey was completed.",
          "format": "date-time"
        },
        "demographics": {
          "type": "string",
          "description": "JSON object containing demographic data (unit, sector, age, etc.).",
          "format": "json"
        }
      },
      "required": [
        "id",
        "deploymentId",
        "token"
      ]
    },
    "Answer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Answer",
      "type": "object",
      "description": "Represents an answer to a question in a survey.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the answer.",
          "format": "uuid"
        },
        "respondentId": {
          "type": "string",
          "description": "Reference to SurveyRespondent. (Relationship: SurveyRespondent 1:N Answer)"
        },
        "questionId": {
          "type": "string",
          "description": "Reference to Question. (Relationship: Question 1:N Answer)"
        },
        "rawResponse": {
          "type": "string",
          "description": "The raw response to the question (e.g., 'Sempre')."
        },
        "calculatedScore": {
          "type": "number",
          "description": "The calculated score for the answer (1-5)."
        },
        "sentiment": {
          "type": "string",
          "description": "The sentiment of the answer ('Desfavorável', 'Neutro', 'Favorável')."
        }
      },
      "required": [
        "id",
        "respondentId",
        "questionId",
        "calculatedScore"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "/companies/{companyId}": {
      "schema": "Company",
      "description": "Stores company information. Only SuperAdmins can create or update company documents. ClientAdmins can read their own company document."
    },
    "/companies/{companyId}/units/{unitId}": {
      "schema": "Unit",
      "description": "Stores unit information within a company. ClientAdmins can manage units within their company."
    },
    "/companies/{companyId}/units/{unitId}/sectors/{sectorId}": {
      "schema": "Sector",
      "description": "Stores sector information within a unit. ClientAdmins can manage sectors within their company."
    },
    "/companies/{companyId}/positions/{positionId}": {
      "schema": "Position",
      "description": "Stores job position information for a company. ClientAdmins can manage positions within their company."
    },
    "/survey_templates/{templateId}": {
      "schema": "SurveyTemplate",
      "description": "Stores survey templates. Only SuperAdmins can manage survey templates."
    },
    "/survey_templates/{templateId}/domains/{domainId}": {
      "schema": "Domain",
      "description": "Stores domains within a survey template. Only SuperAdmins can manage domains."
    },
    "/survey_templates/{templateId}/domains/{domainId}/questions/{questionId}": {
      "schema": "Question",
      "description": "Stores questions within a domain. Only SuperAdmins can manage questions."
    },
    "/survey_deployments/{deploymentId}": {
      "schema": "SurveyDeployment",
      "description": "Stores survey deployments for companies. Includes denormalized 'companyId' for authorization independence. ClientAdmins can manage deployments for their company."
    },
    "/survey_deployments/{deploymentId}/respondents/{respondentId}": {
      "schema": "SurveyRespondent",
      "description": "Stores anonymous survey respondents. Includes denormalized 'deploymentId' for authorization independence. The token field guarantees security of the anonymous access link."
    },
    "/survey_deployments/{deploymentId}/respondents/{respondentId}/answers/{answerId}": {
      "schema": "Answer",
      "description": "Stores answers to survey questions. Includes denormalized 'respondentId' and implicitly 'deploymentId' for authorization independence."
    }
  }
}

    